<ion-content class="background">

  <!-- ğŸ‘¤ CabeÃ§alho -->
  <div class="profile-header fade-in">
    <ion-icon name="person-circle-outline" class="profile-icon"></ion-icon>
    <h2>Meu Perfil</h2>
    <p class="user-email">{{ emailUsuario }}</p>
  </div>

  <!-- ğŸ“‹ InformaÃ§Ãµes pessoais -->
  <div class="info-card fade-in">
    <h3>InformaÃ§Ãµes Pessoais</h3>

    <div *ngIf="!editando; else modoEdicao">
      <div class="info-item">
        <ion-icon name="person-outline"></ion-icon>
        <span>{{ nomeUsuario || 'UsuÃ¡rio' }}</span>
      </div>
      <div class="info-item">
        <ion-icon name="mail-outline"></ion-icon>
        <span>{{ emailUsuario }}</span>
      </div>
      <div class="info-item">
        <ion-icon name="call-outline"></ion-icon>
        <span>{{ telefoneUsuario || '(00) 00000-0000' }}</span>
      </div>

      <button class="btn-editar" (click)="habilitarEdicao()">Editar Perfil</button>
    </div>

    <ng-template #modoEdicao>
      <div class="info-item">
        <ion-icon name="person-outline"></ion-icon>
        <input type="text" [(ngModel)]="nomeUsuario" placeholder="Nome completo" />
      </div>
      <div class="info-item">
        <ion-icon name="call-outline"></ion-icon>
        <input type="tel" [(ngModel)]="telefoneUsuario" placeholder="(00) 00000-0000" />
      </div>

      <button class="btn-editar" (click)="salvarAlteracoes()">Salvar</button>
    </ng-template>
  </div>

  <!-- ğŸ§¾ HistÃ³rico de pedidos -->
  <div class="info-card fade-in">
    <h3>HistÃ³rico de Pedidos</h3>
    <div *ngIf="pedidos.length > 0; else semPedidos">
      <div class="pedido-item" *ngFor="let pedido of pedidos">
        <p><strong>Pedido nÂº:</strong> {{ pedido.numero }}</p>
        <p><strong>Total:</strong> R$ {{ pedido.total | number: '1.2-2' }}</p>
        <p><strong>Data:</strong> {{ pedido.data | date:'dd/MM/yyyy HH:mm' }}</p>
      </div>
    </div>
    <ng-template #semPedidos>
      <p class="sem-pedidos">VocÃª ainda nÃ£o fez pedidos ğŸ˜‹</p>
    </ng-template>
  </div>

  <!-- âš™ï¸ OpÃ§Ãµes -->
  <div class="info-card fade-in">
    <h3>ConfiguraÃ§Ãµes</h3>
    <button class="btn-opcao" (click)="alterarSenha()">
      <ion-icon name="lock-closed-outline"></ion-icon>
      Alterar Senha
    </button>
    <button class="btn-opcao sair" (click)="logout()">
      <ion-icon name="log-out-outline"></ion-icon>
      Sair da Conta
    </button>
  </div>

  <!-- ğŸ° Sobre -->
  <div class="sobre fade-in">
    <h4>ğŸ° Sobre a RK Confeitaria</h4>
    <p>
      Feita com amor e ingredientes selecionados ğŸ’š  
      A RK Confeitaria traz o sabor artesanal em cada doce.
    </p>
  </div>

</ion-content>

<!-- ğŸ”½ Barra inferior com navegaÃ§Ã£o funcional -->
<ion-footer class="footer-nav">
  <div class="nav-buttons">
    <button class="nav-btn" (click)="navegar('/menu')">
      <ion-icon name="restaurant-outline"></ion-icon>
      <span>Menu</span>
    </button>

    <button class="nav-btn" (click)="navegar('/carrinho')">
      <ion-icon name="cart-outline"></ion-icon>
      <span>Carrinho</span>
    </button>

    <button class="nav-btn active" (click)="navegar('/perfil')">
      <ion-icon name="person-outline"></ion-icon>
      <span>Perfil</span>
    </button>
  </div>
</ion-footer>
